@{
    ViewData["Title"] = "DangkyBs";
    <link rel="stylesheet" href="~/css/Dangky.css" asp-append-version="true" />
}

<body>

     <!-- Modal Điều Khoản -->
    <div id="modalTerms" class="modal">
        <div class="modal-content">
            <span class="close" id="closeModal">&times;</span>
            <h2>Điều Khoản Sử Dụng</h2>
            <p>Trước khi đăng ký mở tài khoản và tham gia ứng dụng VOVBACSI, vui lòng đọc kỹ các Điều Khoản...</p>
            <!-- Thêm nội dung điều khoản ở đây -->
            <textarea rows="10" cols="50" readonly>
               ĐIỀU KHOẢN THỎA THUẬN KHI THAM GIA ỨNG DỤNG VOVBACSI

Trước khi đăng ký mở tài khoản tư vấn, khám chữa bệnh trên ứng dụng VOVBACSI (Sau đây gọi tắt là ứng dụng), vui lòng đọc kỹ các Điều Khoản và điều kiện dưới đây để hiểu rõ quyền lợi và nghĩa vụ hợp pháp của mình trong công tác tư vấn khám chữa bệnh trực tuyến.

Nếu bạn không đồng ý hoặc chưa hiểu rõ những điều khoản này cũng như những quy định pháp luật có liên quan, vui lòng không tạo tài khoản tư vấn trên ứng dụng, và hãy gọi cho chúng tôi theo số điện thoại 19001289 để được hỗ trợ.

Nguyên tắc chính:

- Người tham gia tư vấn, khám chữa bệnh trên ứng dụng phải là bác sĩ, có giấy phép hành nghề khám chữa bênh hợp pháp, tự nguyện tham gia thực hiện tư vấn về sức khỏe, khám chữa bệnh và các vấn đề về y học trên nền tảng mạng internet với các ứng dụng online và ofline trên phương tiện điện thoại thông minh, máy tính, và các phương tiện khác mà có thể cài đặt được ứng dụng.

- Các bác sĩ tham gia ứng dụng phải được sự đồng ý của đơn vị quản lý ứng dụng mới có thể tạo được tài khoản trên ứng dụng và phải cung cấp cho đơn vị quản lý ảnh chụp hoặc bản sao chứng minh thư,(hoặc căn cước công dân) và chứng chỉ hành nghề khám chữa bệnh hợp pháp của mình.

- Thỏa thuận này quy định và ràng buộc giữa hai bên đối với tất cả mọi vấn đề, quyền lợi, trách nhiệm…liên quan đến ứng dụng doctor24 và bacsi24.

1. Quyền lợi và trách nhiệm của Bác sĩ

- Có trách nhiệm điền đầy đủ các thông tin bắt buộc trên trang thông tin cá nhận của mình một cách trung thực, chính xác.

- Cung cấp ảnh chụp hoặc bản sao căn cước công dân và chứng chỉ hành nghề hợp pháp cho đơn vị quản lý ứng dụng.

- Chịu trách nhiệm về nội dung tư vấn, khám chữa bệnh của mình cho bệnh nhân

- Mọi hoạt động thực hiện trên ứng dụng không được vi phạm pháp luật. Quá trình tư vấn, khám chữa bệnh cho người bệnh luôn y đức, hòa nhã và trung thực.

- Không được tư vấn, khám chữa bệnh trong lĩnh vực không thuộc phạm vi chuyên môn của mình.

- Không được có những hành vi xúc phạm tới nhận phẩm của người khác.

- Đảm bảo về tình trang phương tiện cài đặt ứng dụng của mình hoạt động tốt bao gồm cả vấn đề bảo mật.

- Không được cho người khác, nhất là những người không có chứng chỉ hành nghề khám chữa bệnh sử dụng tài khoản của mình.

- Phải giữ bí mật các thông tin của bệnh nhân trên ứng dụng.

- Được chủ động bố trí thời gian tư vấn.

- Được toàn quyền đặt mức phí tư vấn theo trình độ, khả năng, thời gian tư vấn.

- Được nhận 60% số tiền người nhận tư vấn trả qua ứng dụng, chưa khấu trừ các khoản phải nộp do nhà nước quy định nếu có (như Thuế thu nhập cá nhân…vvv nếu có).

- Thời hạn thanh toán cho bac sĩ (chủ tài khoản) là 03 tháng một lần kể từ khi tài khoản được mở trên ứng dụng.

- Được tùy ý thay đổi mật khẩu đăng nhập tài khoản của mình.

- Được bảo mật các thông tin riêng tư và nhận thân.

2. Quyền lợi và trách nhiệm của đơn vị quản lý ứng dụng

- Đảm bảo mức độ hoạt động tối ưu nhất của ứng dụng cho bác sĩ thực hiện hoạt động tư vấn, khám chữa bệnh trên ứng dụng

- Đảm bảo lưu trữ các tư liệu, nội dung tư vấn, khám chữa bệnh của bác sĩ khi thực hiện hoạt động trên ứng dụng theo quy định.

- Chịu trách nhiệm kiểm soát, lưu trữ tài khoản trên ứng dụng và thanh toán cho Bác sĩ theo đúng thỏa thuận.

- Chịu trách nhiệm giữ bí mật các thông tin của Bác sĩ và bệnh nhân.

- Chịu trách nhiệm thu hộ nhà nước các khoản phải nộp theo quy định (nếu có) của bác sĩ khi tư vấn, khám chữa bệnh trên ứng dụng.

- Được giữ lại 40% chi phí tư vấn khám chữa bệnh của bệnh nhân trả cho Bác sĩ để chi trả các chi phí như : internet, đường truyền, chăm sóc khách hàng, bảo dưỡng hệ thống…và các chi phí khác

- Được bảo lưu quyền quản trị, nếu phát hiện chủ tài khoản vi phạm bất cứ quy định nào đơn vị quản lý sẽ xóa tài khoản trên ứng dụng

- Được quyền nâng cấp và cập nhật các phiên bản mới nhất khi cần thiết

- Sau khi kiểm tra và xác thực thông tin của bác sĩ thì quản trị viên sẽ thông báo tới Bác sĩ (chủ tài khoản) bằng điện thoại hoặc email

3. Thanh toán

- Đơn vị quản lý ứng dụng sẽ thanh toán cho Bác sĩ 03 tháng một lần kể từ khi Bác sĩ bắt đầu được mở tài khoản trên ứng dụng.

- Số tiền thanh toán cho Bác sĩ là số tiền sau khi đã trừ đi số tiền đơn vị quản lý được giữ lại và số tiền thuế thu nhập cá nhận, hoặc số tiền khác mà Bác sĩ phải nộp theo quy định của luật pháp nếu có.

- Việc thanh toán này sẽ được thực hiện sau khi hai bên xác nhận số liệu đối soát bằng Email hoặc văn bản giấy.

4. Bất khả kháng

Trong các trường hợp bất khả kháng như thiên tai, địch họa…hoặc các trường hợp bị đứt kết nối do các nhà mạng cung cấp internet – không thuộc lỗi của đơn vị quản lý ứng dụng thì đơn vị quản lý ứng dụng sẽ khôi phục ngay hoạt động của ứng dụng khi bất khả kháng đó kết thúc

5. Thỏa thuận chung

- Hai bên cam kết những điều khoản trên là hoàn toàn tự nguyện và cam kết thực hiện đúng các điều khoản đó

- Trong trường hợp có vấn đề phát sinh hai bên cùng thống nhất giải quyết, nếu không giải quyết được sẽ đưa ra tòa án thành phố Hà Nội để giải quyết

- Mọi thắc mắc xin gọi về số điện thoại hotline: 1900 1289 để được hỗ trợ.

Tôi đã đọc và đồng ý với tất cả các điều khoản và điều kiện trên cũng như bất kỳ điều khoản nào được chỉnh sửa sau này. Bằng cách click vào nút “ ĐỒNG Ý” khi đăng ký tạo tài khoản tư vấn khám chữa bệnh trực tuyến trên ứng dụng, tôi hiểu rằng tôi đang tạo chữ ký điện tử mà nó có giá trị và hiệu lực tương tự như chữ ký tôi ký bằng tay.
            </textarea>
            <br>
            <button id="agreeButton">Tôi đồng ý</button>
        </div>
    </div>

    <h2>Đăng ký bác sĩ</h2>
    <div class="form-container">
        <form action="~/Bacsis/ThucHienDKBs" method="post" enctype="multipart/form-data">

            <label for="hinhanh">Ảnh đại diện</label>
            <input type="file" id="hinhanh" name="hinhanh" accept="image/*" required>
            <div id="preview-container" style="margin-top: 10px;">
                <img id="preview" src="" alt="Ảnh xem trước" style="max-width: 200px; max-height: 200px; display: none; border: 1px solid #ccc; padding: 5px;">
            </div>

            <label for="username">Tên Người dùng <span class="required">(Bắt buộc nhập)</span></label>
            <input type="text" id="username" name="username" required>

            <div>
                <label for="password">Mật khẩu <span class="required">(Bắt buộc nhập)</span></label>
                <input type="password" id="password" name="password" required>
                <p id="password-error" style="color: red; font-size: 12px; margin: 5px 0 0;"></p>
            </div>

            <div>
                <label for="confirm-password">Nhập lại mật khẩu <span class="required">(Bắt buộc nhập)</span></label>
                <input type="password" id="confirm-password" name="confirm-password" required>
                <p id="confirm-password-error" style="color: red; font-size: 12px; margin: 5px 0 0;"></p>
            </div>

            <label for="birthyear">Năm sinh <span class="required">(Bắt buộc nhập)</span></label>
            <input type="date" id="birthyear" name="birthyear" required>
            <p id="birth-error" style="color: red; font-size: 12px; margin: 5px 0 0;"></p>

            <label for="cmtnumber">Số CMT <span class="required">(Bắt buộc nhập)</span></label>
            <input type="text" id="cmtnumber" name="cmtnumber" placeholder="Số CMT" required pattern="\d*" title="Vui lòng nhập số">

            <input type="date" id="issuedate" name="issuedate" placeholder="Ngày cấp" required>
            <input type="text" id="issueplace" name="issueplace" placeholder="Nơi cấp" required>

            <div>
                <label for="cmt-image-front">Ảnh CMT mặt trước <span class="required">(Bắt buộc nhập)</span></label>
                <input type="file" id="cmt-image-front" name="cmtimagefront" accept="image/*" required>
                <div id="preview-front-container" style="margin-top: 10px;">
                    <img id="preview-front" src="" alt="Xem trước mặt trước" style="max-width: 200px; max-height: 200px; display: none; border: 1px solid #ccc; padding: 5px;">
                </div>
            </div>

            <div>
                <label for="cmt-image-back">Ảnh CMT mặt sau <span class="required">(Bắt buộc nhập)</span></label>
                <input type="file" id="cmtimageback" name="cmtimageback" accept="image/*" required>
                <div id="preview-back-container" style="margin-top: 10px;">
                    <img id="preview-back" src="" alt="Xem trước mặt sau" style="max-width: 200px; max-height: 200px; display: none; border: 1px solid #ccc; padding: 5px;">
                </div>
            </div>

            <label for="gender">Giới tính <span class="required">(Bắt buộc nhập)</span></label>
            <select id="gender" name="gender" required>
                <option value="">Chọn giới tính</option>
                <option value="Nam">Nam</option>
                <option value="Nữ">Nữ</option>
            </select>

            <div>
                <label for="email">Email <span class="required">(Bắt buộc nhập)</span></label>
                <input type="email" id="email" name="email" required>
                <div id="email-error" style="color: red; font-size: 12px; display: none;">Email không hợp lệ hoặc không tồn tại.</div>
            </div>

            <div>
                <label for="phone">Số điện thoại <span class="required">(Bắt buộc nhập)</span></label>
                <input type="text" id="phone" name="phone" required>
                <div id="phone-error" style="color: red; font-size: 12px; display: none;">
                    Số điện thoại không đúng định dạng Việt Nam. Phải bắt đầu bằng 03, 05, 07, 08, hoặc 09 và có độ dài 10 hoặc 11 chữ số.
                </div>
            </div>



            <label for="diaChi">Địa chỉ</label>
            <input type="text" id="diaChi" name="diaChi" placeholder="Địa chỉ">

            <label for="namKinhNghiem">Năm kinh nghiệm <span class="required">(Bắt buộc nhập)</span></label>
            <input type="number" id="namKinhNghiem" name="namKinhNghiem" required>
            <!--Nơi công tác-->
            <label for="noiCongTac">Nơi công tác <span class="required">(Bắt buộc chọn)</span></label>
            <select id="noiCongTac" name="noiCongTac" required>
                <option value="">-- Hãy chọn bệnh viện công tác --</option>
                @foreach (var benhVien in ViewBag.bv)
                {
                    <option value="@benhVien[0]">@benhVien[1]</option>
                }
            </select>

            <label for="khoa">Khoa <span class="required">(Bắt buộc chọn)</span></label>
            <select id="khoa" name="khoa" required>
                <option value="">-- Hãy chọn khoa --</option>
                @if (ViewBag.kb != null)
                {
                    foreach (var kb in ViewBag.kb)
                    {
                        <option value="@kb[0]">@kb[1]</option>
                    }
                }
                else
                {
                    <option value="">Không có khoa nào</option>
                }
            </select>

            <label for="chuyenKhoa">Chuyên khoa <span class="required">(Bắt buộc chọn)</span></label>
            <select id="chuyenKhoa" name="chuyenKhoa" required>
                <option value="">-- Hãy chọn chuyên khoa --</option>
                @if (ViewBag.cn != null)
                {
                    foreach (var ck in ViewBag.cn)
                    {
                        <option value="@ck[1]">@ck[1]</option>
                    }
                }
                else
                {
                    <option value="">Không có chuyên khoa nào</option>
                }
            </select>

            <label for="soChungChi">Số chứng chỉ hành nghề <span class="required">(Bắt buộc nhập)</span></label>
            <input type="text" id="soChungChi" name="soChungChi" required >

            <label for="ngayThangCap">Ngày tháng cấp <span class="required">(Bắt buộc nhập)</span></label>
            <input type="date" id="ngayThangCap" name="ngayThangCap" required>

            <label for="noiCap">Nơi cấp <span class="required">(Bắt buộc nhập)</span></label>
            <input type="text" id="noiCap" name="noiCap" required>

            <div>
                <label for="anhChungChi1">Ảnh chứng chỉ hành nghề 1 <span class="required">(Bắt buộc nhập)</span></label>
                <input type="file" id="anhChungChi1" name="anhChungChi1" accept="image/*" required>
                <div id="preview-container1" style="margin-top: 10px;">
                    <img id="preview1" src="" alt="Xem trước chứng chỉ 1" style="max-width: 200px; max-height: 200px; display: none; border: 1px solid #ccc; padding: 5px;">
                </div>
            </div>

            <div>
                <label for="anhChungChi2">Ảnh chứng chỉ hành nghề 2 <span class="required">(Bắt buộc nhập)</span></label>
                <input type="file" id="anhChungChi2" name="anhChungChi2" accept="image/*" required>
                <div id="preview-container2" style="margin-top: 10px;">
                    <img id="preview2" src="" alt="Xem trước chứng chỉ 2" style="max-width: 200px; max-height: 200px; display: none; border: 1px solid #ccc; padding: 5px;">
                </div>
            </div>

            <label for="hocVi">Học vị</label>
            <select id="hocVi" name="hocVi">
                <option value="">-- Hãy chọn học vị --</option>
                <option value="Cử nhân">Cử nhân</option>
                <option value="Thạc sĩ">Thạc sĩ</option>
                <option value="Tiến sĩ">Tiến sĩ</option>
                <option value="Giáo sư">Giáo sư</option>
                <option value="Phó giáo sư">Phó giáo sư</option>
            </select>

            <label for="hocHam">Học hàm</label>
            <select id="hocHam" name="hocHam">
                <option value="">-- Hãy chọn học hàm --</option>
                <option value="Phó giáo sư">Phó giáo sư</option>
                <option value="Giáo sư">Giáo sư</option>
            </select>

            <label for="chuyenMon">Chuyên môn <span class="required">(Bắt buộc nhập)</span></label>
            <select id="chuyenMon" name="chuyenMon" required>
                <option value="">-- Hãy chọn chuyên môn --</option>
                <option value="Bác sĩ">Bác sĩ</option>
                <option value="Y tá">Y tá</option>
                <option value="Dược sĩ">Dược sĩ</option>
                <option value="Điều dưỡng viên">Điều dưỡng viên</option>
            </select>


            <label for="cacBenhDieuTri">Các bệnh điều trị <span class="required">(Bắt buộc nhập)</span></label>
            <textarea id="cacBenhDieuTri" name="cacBenhDieuTri" required></textarea>

            <label for="gioithieu">Giới thiệu <span class="required">(Bắt buộc nhập)</span></label>
            <textarea id="gioithieu" name="gioithieu" required></textarea>

            <label for="thontinbangcap">Thông tin bằng cấp</label>
            <textarea id="thontinbangcap" name="thontinbangcap" required></textarea>

            <label for="quaTrinhhoc">Quá trình Học</label>
            <textarea id="quaTrinhhoc" name="quaTrinhhoc" required></textarea>

            <label for="quaTrinhCongTac">Quá trình công tác</label>
            <textarea id="quaTrinhCongTac" name="quaTrinhCongTac" required></textarea>

            <label for="khamChuaBenh">Khám chữa bệnh</label>
            <textarea id="khamChuaBenh" name="khamChuaBenh" required></textarea>

            <label for="nghienCuuKhoaHoc">Nghiên cứu khoa học</label>
            <textarea id="nghienCuuKhoaHoc" name="nghienCuuKhoaHoc" required></textarea>

            <label for="giangDay">Giảng dạy</label>
            <textarea id="giangDay" name="giangDay" required></textarea>

            <label for="hoiVienCongTac">Hội viên công tác</label>
            <textarea id="hoiVienCongTac" name="hoiVienCongTac" required></textarea>

            <label for="quanLy">Quản lý</label>
            <textarea id="quanLy" name="quanLy" required></textarea>

            <button type="submit" class="submit-button" >Đăng ký</button>

            <a href="@Url.Action("Index","Home")" class="quaylai-button">Quay lại Trang chủ</a>
        </form>
    </div>
<script>
     // Hàm thiết lập xem trước ảnh
function setupImagePreview(inputId, previewId) {
    const fileInput = document.getElementById(inputId);
    const previewImage = document.getElementById(previewId);

    fileInput.addEventListener("change", function () {
        const file = fileInput.files[0]; // Lấy file đã chọn

        if (file) {
            const reader = new FileReader();

            // Khi file được đọc xong, hiển thị ảnh
            reader.onload = function (e) {
                previewImage.src = e.target.result; // Gán URL ảnh
                previewImage.style.display = "block"; // Hiển thị ảnh
            };

            reader.readAsDataURL(file); // Đọc file dưới dạng URL
        } else {
            // Nếu không có ảnh, ẩn ảnh xem trước
            previewImage.src = "";
            previewImage.style.display = "none";
        }
    });
}

// Sử dụng setupImagePreview cho từng trường input file
setupImagePreview("hinhanh", "preview"); // Xem trước ảnh đại diện
setupImagePreview("cmt-image-front", "preview-front"); // Xem trước ảnh CMT mặt trước
setupImagePreview("cmtimageback", "preview-back"); // Xem trước ảnh CMT mặt sau
setupImagePreview("anhChungChi1", "preview1"); // Xem trước ảnh chứng chỉ 1
setupImagePreview("anhChungChi2", "preview2"); // Xem trước ảnh chứng chỉ 2

const passwordInput = document.getElementById("password");
    const confirmPasswordInput = document.getElementById("confirm-password");
    const passwordError = document.getElementById("password-error");
    const confirmPasswordError = document.getElementById("confirm-password-error");

    // Kiểm tra mật khẩu khi gõ
    passwordInput.addEventListener("input", function () {
        const password = passwordInput.value;
        const passwordRegex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;

        if (!passwordRegex.test(password)) {
            passwordError.textContent = "Mật khẩu phải gồm ít nhất 8 ký tự, bao gồm cả chữ và số.";
        } else {
            passwordError.textContent = "";
        }
    });

    // Kiểm tra mật khẩu nhập lại khi gõ
    confirmPasswordInput.addEventListener("input", function () {
        const password = passwordInput.value;
        const confirmPassword = confirmPasswordInput.value;

        if (confirmPassword !== password) {
            confirmPasswordError.textContent = "Mật khẩu nhập lại không khớp.";
        } else {
            confirmPasswordError.textContent = "";
        }
    });

    // Lấy các phần tử modal và các nút
const modal = document.getElementById("modalTerms");
const closeModal = document.getElementById("closeModal");
const closeButton = document.getElementById("closeButton");
const agreeButton = document.getElementById("agreeButton");

// Hiển thị modal khi trang được tải (có thể thay đổi tùy vào yêu cầu)
window.addEventListener("load", function() {
    modal.style.display = "block"; // Mở modal khi trang tải
});

// Xử lý khi nhấn nút "Tôi đồng ý"
agreeButton.addEventListener("click", function() {
    modal.style.display = "none"; // Đóng modal
    alert("Cảm ơn bạn đã đồng ý với các điều khoản.");
});

// Xử lý khi nhấn nút "Hủy bỏ" nhưng không đóng modal
closeButton.addEventListener("click", function() {
    // Không làm gì ở đây, chỉ dừng hành động mặc định của nút
    // Điều này sẽ không đóng modal
});

// Xử lý khi bấm nút đóng (×)
closeModal.addEventListener("click", function() {
    modal.style.display = "none"; // Đóng modal khi nhấn nút ×
});

// Xử lý khi bấm ngoài modal để đóng
window.addEventListener("click", function(event) {
    if (event.target === modal) {
        modal.style.display = "none"; // Đóng modal nếu nhấn bên ngoài
    }
});

        //Đăng ký thành công
         function handleSubmit() {
        // Hiển thị thông báo trong console
        console.log("Đăng ký thành công, chờ đơn xác nhận từ người quản lý");

        // Nếu muốn ngừng việc gửi form, bạn có thể thêm dòng này
        event.preventDefault();
    }
   

    
    // Kiểm tra lần cuối khi submit
    document.getElementById("passwordForm").addEventListener("submit", function (event) {
        const password = passwordInput.value;
        const confirmPassword = confirmPasswordInput.value;
        const passwordRegex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;

        // Nếu có lỗi thì ngăn gửi form
        if (!passwordRegex.test(password) || confirmPassword !== password) {
            event.preventDefault();
        }
    });

    //kiểm tra tuổi
    const birthInput = document.getElementById("birthyear");
    const birthError = document.getElementById("birth-error");

    // Kiểm tra khi ngày sinh thay đổi
    birthInput.addEventListener("change", function () {
        const birthDate = new Date(birthInput.value);
        const today = new Date();

        // Tính tuổi
        const age = today.getFullYear() - birthDate.getFullYear();
        const monthDiff = today.getMonth() - birthDate.getMonth();
        const dayDiff = today.getDate() - birthDate.getDate();

        // Kiểm tra nếu chưa đủ 18 tuổi
        if (age < 18 || (age === 18 && (monthDiff < 0 || (monthDiff === 0 && dayDiff < 0)))) {
            birthError.textContent = "Bạn phải đủ 18 tuổi.";
        } else {
            birthError.textContent = "";
        }
    });
const phoneInput = document.getElementById("phone");
const phoneError = document.getElementById("phone-error");

// Kiểm tra số điện thoại khi gõ
phoneInput.addEventListener("input", function () {
    const phone = phoneInput.value;
    const phoneRegex = /^(0[3|5|7|8|9])+([0-9]{8})$/;

    if (!phoneRegex.test(phone)) {
        phoneError.textContent = "Số điện thoại không đúng định dạng Việt Nam. Phải bắt đầu bằng 03, 05, 07, 08, hoặc 09 và có độ dài 10 hoặc 11 chữ số.";
    } else {
        phoneError.textContent = ""; // Ẩn thông báo lỗi nếu hợp lệ
    }
});


</script>

</body>
